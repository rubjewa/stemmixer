<!DOCTYPE html>
<html>

<head>
    <!--  Fake favicon bad request  -->
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
    <meta charset="UTF-8">
    <style>
        body {
            background: #666;
        }
        
        button {
            border: none;
            cursor: pointer;
            outline: none;
        }
        
        input {
            outline: none;
        }
        
        button#playpausebtn {
            /*            background: url(images/pause.png) no-repeat;*/
            width: 12px;
            height: 14px;
        }
        
        button#mutebtn {
            /*            background: url(images/speaker.png) no-repeat;*/
            width: 5px;
            height: 14px;
        }
        
        input#seekslider {
            width: 100px;
        }
        
        input#volumeslider {
            width: 70px;
        }
        
        div#timebox {
            display: inline-block;
            width: 80px;
            background: #000;
            text-align: center;
            color: #09F;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 11px;
        }
        
        input[type='range'] {
            -webkit-appearance: none !important;
            margin: 0px;
            padding: 0px;
            background: #000;
            height: 13px;
            border-bottom: #333 1px solid;
        }
        
        input[type='range']::-ms-fill-lower {
            background: #000;
        }
        
        input[type='range']::-ms-fill-upper {
            background: #000;
        }
        
        input[type='range']::-moz-range-track {
            border: none;
            background: #000;
        }
        
        input[type='range']::-webkit-slider-thumb {
            -webkit-appearance: none !important;
            background: radial-gradient(#FFF, #333);
            height: 11px;
            width: 11px;
            border-radius: 100%;
            cursor: pointer;
        }
        
        input[type='range']::-moz-range-thumb {
            background: radial-gradient(#FFF, #333);
            height: 11px;
            width: 11px;
            border-radius: 100%;
            cursor: pointer;
        }
        
        input[type='range']::-ms-thumb {
            -webkit-appearance: none !important;
            background: radial-gradient(#FFF, #333);
            height: 11px;
            width: 11px;
            border-radius: 100%;
            cursor: pointer;
        }
    </style>
    <script>
        var playbtn, mutebtn, seekslider, seeking = false
            , seekto, curtimetext, durtimetext, video;
        var audioplayers = [];
        var volumesliders = [];

        function initAudioPlayer() {
            video = document.getElementById("video1");
            audio = new Audio();
            audio.src = "sax_pizzicato.mp3";
            audio.preload = "auto";
            audio.loop = true;
            audio.name = "Violin pizzicato";
            //
            audio2 = new Audio();
            audio2.src = "sax_chords.mp3";
            audio2.preload = "auto";
            audio2.loop = true;
            audio2.name = "Rhode melody";
            //
            audio3 = new Audio();
            audio3.src = "sax_bass.mp3";
            audio3.preload = "auto";
            audio3.loop = true;
            audio3.name = "Guitar Bass";
            //
            audioplayers.push(audio, audio2, audio3);
            //Retrieve Audio sources by name
            for (var i = 0; i < audioplayers.length; i++) {
                audioplayers[i].preload;
                document.getElementById(audioplayers[i].name).innerHTML = audioplayers[i].name;
            }
            //
            playbtn = document.getElementById("playpausebtn");
            mutebtn = document.getElementById("mutebtn");
            seekslider = document.getElementById("seekslider");
            //Dedicate volumeslider vars to elements
            for (var i = 0; i < audioplayers.length; i++) {
                volumesliders[i] = document.getElementById("volumeslider" + i);
            }
            curtimetext = document.getElementById("curtimetext");
            durtimetext = document.getElementById("durtimetext");
            // Add Event Handling
            playbtn.addEventListener("click", playPause);
            mutebtn.addEventListener("click", mute);
            seekslider.addEventListener("mousedown", function (event) {
                seeking = true;
                seek(event);
            });
            seekslider.addEventListener("mousemove", function (event) {
                seek(event);
            });
            seekslider.addEventListener("mouseup", function () {
                seeking = false;
            });
            //Set individual volumes for individual stems
            for (var i = 0; i < audioplayers.length; i++) {
                volumesliders[i].addEventListener("mousemove", setvolume);
            }
            audio.addEventListener("timeupdate", function () {
                seektimeupdate();
            });
            // Functions
            function playPause() {
                if (audio.paused) {
                    for (var i = 0; i < audioplayers.length; i++) {
                        audioplayers[i].play();
                    }
                    video.play();
                    //                    playbtn.style.background = "url(images/pause.png) no-repeat"; 
                }
                else {
                    for (var i = 0; i < audioplayers.length; i++) {
                        audioplayers[i].pause();
                    }
                    video.pause();
                    //                    playbtn.style.background = "url(images/play.png) no-repeat";
                }
            }

            function mute() {
                if (audio.muted) {
                    for (var i = 0; i < audioplayers.length; i++) {
                        audioplayers[i].muted = false;
                    }
                    //                    mutebtn.style.background = "url(images/speaker.png) no-repeat";
                }
                else {
                    for (var i = 0; i < audioplayers.length; i++) {
                        audioplayers[i].muted = true;
                    }
                    //                    mutebtn.style.background = "url(images/speaker_muted.png) no-repeat";
                }
            }

            function seek(event) {
                if (seeking) {
                    for (var i = 0; i < audioplayers.length; i++) {
                        seekslider.value = event.clientX - seekslider.offsetLeft;
                        seekto = audioplayers[i].duration * (seekslider.value / 100);
                        audioplayers[i].currentTime = seekto;
                    }
                    video.currentTime = seekto;
                }
            }

            function setvolume() {
                for (var i = 0; i < audioplayers.length; i++) {
                    audioplayers[i].volume = volumesliders[i].value / 100;
                }
                //                audio.volume = volumeslider.value / 100;
            }

            function seektimeupdate() {
                for (var i = 0; i < audioplayers.length; i++) {
                    var nt = audioplayers[i].currentTime * (100 / audioplayers[i].duration);
                    seekslider.value = nt;
                    var curmins = Math.floor(audioplayers[i].currentTime / 60);
                    var cursecs = Math.floor(audioplayers[i].currentTime - curmins * 60);
                    var durmins = Math.floor(audioplayers[i].duration / 60);
                    var dursecs = Math.floor(audioplayers[i].duration - durmins * 60);
                    if (cursecs < 10) {
                        cursecs = "0" + cursecs;
                    }
                    if (dursecs < 10) {
                        dursecs = "0" + dursecs;
                    }
                    if (curmins < 10) {
                        curmins = "0" + curmins;
                    }
                    if (durmins < 10) {
                        durmins = "0" + durmins;
                    }
                    curtimetext.innerHTML = curmins + ":" + cursecs;
                    durtimetext.innerHTML = durmins + ":" + dursecs;
                }
            }
        }
        window.addEventListener("load", initAudioPlayer);
    </script>
</head>

<body>
    <video id="video1" preload="auto" width="320" height="240">
        <source src="testclip2.mp4" type=video/mp4> </video>
    <div>
        <button id="playpausebtn"></button>
        <br>
        <button id="mutebtn"></button>
        <br> </div>
    <div> <b>Track</b>
        <input id="seekslider" type="range" min="0" max="100" value="0" step="1">
        <div id="timebox"> <span id="curtimetext">00:00</span> / <span id="durtimetext">00:00</span> </div>
        <br>
        <p id="Violin pizzicato">Violin pizzicato</p>
        <input id="volumeslider0" type="range" min="0" max="100" value="30" step="1">
        <br>
        <p id="Rhode melody">Rhode melody</p>
        <input id="volumeslider1" type="range" min="0" max="100" value="40" step="1">
        <br>
        <p id="Guitar Bass">Guitar Bass</p>
        <input id="volumeslider2" type="range" min="0" max="100" value="40" step="1"> </div>
    <br> </body>

</html>